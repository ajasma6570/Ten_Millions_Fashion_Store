<%- include('../adminPartial/header') %>

        <section class="content-main">
            <form action="/admin/editproduct" method="post" enctype="multipart/form-data">
                
            <div class="row">
                <div class="col-9">
                    <div class="content-header">
                        <h2 class="content-title">Edit Product</h2>
                       
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="mb-4">
                                <input type="hidden"    name="id" id="product_title" value="<%=productdata._id%>">
                                <label for="product_title" class="form-label">Name</label>
                                <input type="text" placeholder="<%=productdata.productname%>" class="form-control"  name="productname" id="product_title" value="<%=productdata.productname%>">
                 
     
                                <div class="card-body">
                                    <div class="row gx-2">
                                        <div class="">
                                            <label class="form-label">Category</label>
                                            <select class="form-select" name="categoryname">
                                            <%category.forEach(function(category){%>
                                                <option  value="<%= category.categoryName %>" <% if (category.categoryName === activeValue) { %>selected<% } %>> 
                                                <%=category.categoryName%>
                                                </option>
                                            
                                            <%})%>
                                               
                                               
                                            </select>
                                        </div>
    
                                
                                    </div> <!-- row.// -->
                                </div>
                            <div class="mb-4">
                                <!-- <label for="product_brand" class="form-label">Brand</label> -->
                                <input type="hidden" placeholder="<%=productdata.brand%>" class="form-control" name="brand"  id="product_brand" value="Ten millions">
                            </div>
                            <div class="mb-4">
                                <label for="product_brand" class="form-label">Quantity</label>
                                <input type="text" placeholder="<%=productdata.quantity%>" class="form-control" name="quantity"  id="product_brand" value="<%=productdata.quantity%>">
                            </div>
                            <div class="mb-4">
                                <label for="product_price" class="form-label">Price</label>
                                <input type="text" placeholder="<%=productdata.price%>" class="form-control" name="price"   id="product_price" value="<%=productdata.price%>">
                            </div>
                           
                        </div>
                    </div> <!-- card end// -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <div>
                                <label class="form-label">Description :</label>
                                <input placeholder="<%=productdata.description%>" class="form-control"  name="description" rows="4" value="<%=productdata.description%>">
                            </div>
                        </div>
                    </div> <!-- card end// -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <label class="form-label">Images :</label>
                            <div class="input-upload">
                                
                               <% for(let i=0;i<productdata.productimage.length;i++){ %>
                                
                                <a    data-proid=<%=productdata.productimage[i] %> ><img src="upload/<%=productdata.productimage[i] %>" alt="">  </a>
                                <% if(productdata.productimage[i]) {%>
                                        <input  type="button" value="Delete" data-proid=<%=productdata.productimage[i] %>   class="buttonid"></input>
                                    <% } %>
                                <% } %>

                                <input class="form-control" type="file" name="productimage" multiple>
                                <!-- <div>
                                    <input type="file" id="image-input" multiple>
                                    <img id="preview-image" src="#" alt="Preview Image"> //pending image crop (above input remove cheyth ith use cheyanam)
                                </div> -->
                                
                            </div>
                    </div> <!-- card end// -->
                </div>
           
                
                </div> 
            </div>
            <div>
                <!-- <button class="btn btn-light rounded font-sm mr-5 text-body hover-up">Save to draft</button> -->
                <input  type="submit"  class="btn btn-success rounded " value="update">
            </div>
            </form>
            
        </section>
        
      
    </main>
    <script src="assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vendors/select2.min.js"></script>
    <script src="assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="assets/js/main.js" type="text/javascript"></script>


    <script src="https://code.jquery.com/jquery-3.6.4.slim.js" integrity="sha256-dWvV84T6BhzO4vG6gWhsWVKVoa4lVmLnpBOZh/CAHU4=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.18/dist/sweetalert2.min.js"></script>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <!-- image cropperjs cdn -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js" integrity="sha512-6lplKUSl86rUVprDIjiW8DuOniNX8UDoRATqZSds/7t6zCQZfaCe3e5zcGaQwxa8Kpn5RTM9Fvl3X2lLV4grPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.css" integrity="sha512-C4k/QrN4udgZnXStNFS5osxdhVECWyhMsK1pnlk+LkC7yJGCqoYxW4mH3/ZXLweODyzolwdWSqmmadudSHMRLA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.js" integrity="sha512-LjPH94gotDTvKhoxqvR5xR2Nur8vO5RKelQmG52jlZo7SwI5WLYwDInPn1n8H9tR0zYqTqfNxWszUEy93cHHwg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" integrity="sha512-cyzxRvewl+FOKTtpBzYjW6x6IAYUCZy3sGP40hn+DQkqeluGRCax7qztK2ImL64SA+C7kVWdLI6wvdlStawhyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />


<!-- image cropper script  -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var imageInput = document.getElementById('image-input');
            var previewImage = document.getElementById('preview-image');
            var cropper;
    
            imageInput.addEventListener('change', function(e) {
                var file = e.target.files[0];
                var reader = new FileReader();
    
                reader.onload = function(event) {
                    previewImage.src = event.target.result;
    
                    if (cropper) {
                        cropper.destroy();
                    }
    
                    cropper = new Cropper(previewImage, {
                        aspectRatio: 1,
                        viewMode: 1,
                        movable: false,
                        zoomable: false,
                        crop: function(event) {
                            console.log(event.detail.x);
                            console.log(event.detail.y);
                            console.log(event.detail.width);
                            console.log(event.detail.height);
                        }
                    });
                };
    
                reader.readAsDataURL(file);
            });
        });
    </script>
    





    <script>
      
            $(document).ready(function(){


            $('.buttonid').on('click', function(){
            console.log("clicked");
            var proID = $(this).data('proid')
            console.log(proID);
            data={
                proID:proID
            }
            
            //with incrementing the quatity number ajax call
            $.ajax({
                url:'/admin/deleteimage',
                method:"post",
                data:data,
                success: function(response){
                console.log(response.message,"ajax calling");
                if(response.message == "1"){
            
                    location.reload()
                }
                }
            })

            });

                

                    });

        </script>

</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/page-form-product-3.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:33:32 GMT -->
</html>